<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>iFixit Stats – Friesenjunge226</title>
</head>
<body>
  <h1>iFixit Stats von Friesenjunge226</h1>
  <div id="stats">
    <p>Lade Daten...</p>
  </div>
<p>Das hat funktioniert </p>
  <script>
    const username = "Friesenjunge226";
    const proxyUrl = "https://api.allorigins.win/get?url=";
    const apiUrl = `https://www.ifixit.com/api/2.0/users/${username}`;
    const statsDiv = document.getElementById("stats");

    fetch(proxyUrl + encodeURIComponent(apiUrl))
      .then(res => {
        if (!res.ok) throw new Error("Antwort vom Proxy war nicht ok.");
        return res.json();
      })
      .then(data => {
        if (!data.contents) throw new Error("Leere Antwort vom iFixit-Proxy.");
        const user = JSON.parse(data.contents);

        if (!user || !user.badge_counts) {
          throw new Error("Ungültige Nutzerdaten erhalten.");
        }

        statsDiv.innerHTML = `
          <p><strong>Benutzername:</strong> ${user.username}</p>
          <p><strong>Reputation:</strong> ${user.reputation}</p>
          <p><strong>Badges:</strong> ${user.badge_counts.total} 
          (Gold: ${user.badge_counts.gold}, 
           Silber: ${user.badge_counts.silver}, 
           Bronze: ${user.badge_counts.bronze})</p>
          <p><strong>iFixit-Profil:</strong> <a href="https://www.ifixit.com/User/${user.userid}" target="_blank">Hier klicken</a></p>
        `;
      })
      .catch(err => {
        statsDiv.innerHTML = `<p style="color:red;">Fehler beim Laden von Daten: ${err.message}</p>`;
        console.error("Fehlerdetails:", err);
      });
  </script>
</body>
</html>
